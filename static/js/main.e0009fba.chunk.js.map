{"version":3,"sources":["services/httpService.js","App.js","serviceWorker.js","index.js"],"names":["axios","interceptors","response","use","error","status","console","log","Promise","reject","httpService","get","post","put","delete","setJwt","jwt","defaults","headers","common","style","height","overflow","colors","InteriorWall","ExteriorWall","Roof","InteriorFloor","Shade","SlabOnGrade","App","sceneSetup","width","_this","el","clientWidth","clientHeight","scene","THREE","camera","up","set","controls","OrbitControls","renderer","alpha","antialias","setSize","appendChild","domElement","lightAmbient","add","lightDirectional","position","shadow","mapSize","castShadow","lightPoint","axesHelper","readXMLFile","startAnimationLoop","render","requestID","window","requestAnimationFrame","update","handleWindowResize","aspect","updateProjectionMatrix","_callee","_ref2","data","_convert$xml2js","gbXML","regenerator_default","a","wrap","_context","prev","next","http","sent","convert","xml2js","compact","space","addCustomSceneObjects","stop","gb","surfaces","Campus","Surface","polyloops","openings","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","surface","value","Opening","PlanarGeometry","polyloop","PolyLoop","points","getPoints","push","arr","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","err","return","remove","campusSurfaces","i","length","material","color","_attributes","surfaceType","emissive","side","flatShading","shape","drawShapeSinglePassObjects","zoomObjectBoundingSphere","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","CartesianPoint","CartesianPointCoordinateArray","Coordinate","map","obj","parseFloat","_text","point","fromArray","vertices","holes","plane","setFromCoplanarPoints","lookAt","normal","objQuaternionConjugate","quaternion","copy","clone","conjugate","updateMatrixWorld","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","vertex","localToWorld","autoClose","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","verticesHoles","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","hole","setFromPoints","geometryShape","shapeMesh","multiplyScalar","constant","boundingBox","setFromObject","sphere","getBoundingSphere","center","radius","target","maxDistance","far","this","addEventListener","removeEventListener","cancelAnimationFrame","dispose","_this2","react_default","createElement","ref","Component","Boolean","location","hostname","match","ReactDOM","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.e0009fba.chunk.js","sourcesContent":["import axios from \"axios\";\r\n//import { toast } from \"react-toastify\";\r\n//import auth from \"./authService\";\r\n\r\naxios.interceptors.response.use(null, error => {\r\n\tconst expectedError =\r\n\t\terror.response &&\r\n\t\terror.response.status >= 400 &&\r\n\t\terror.response.status < 500;\r\n\tif (!expectedError) {\r\n\t\tconsole.log(\"Unexpected error occured.\", error);\r\n\t\t//toast.error(`Unexpected error occured. ${error}`);\r\n\t} else {\r\n\t\tconsole.log(\"Expected error occured.\", error.response);\r\n\t\t//toast.warn(`Expected error occured! ${error.response.status}`);\r\n\t}\r\n\r\n\treturn Promise.reject(error);\r\n});\r\n\r\nexport function setJwt(jwt) {\r\n\taxios.defaults.headers.common[\"x-auth-token\"] = jwt;\r\n}\r\n\r\nexport default {\r\n\tget: axios.get,\r\n\tpost: axios.post,\r\n\tput: axios.put,\r\n\tdelete: axios.delete,\r\n\tsetJwt\r\n};\r\n","import React, { Component } from \"react\";\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport http from \"./services/httpService\";\nimport convert from \"xml-js\";\n\nconst style = {\n\theight: \"100vh\", // we can control scene size by setting container dimensions\n\toverflow: \"hidden\"\n};\n\nconst colors = {\n\tInteriorWall: 0xff0000, //0x9b4f0f,\n\tExteriorWall: 0x0000ff, //0x8d230f,\n\tRoof: 0x00ff00, //0x1e434c,\n\tInteriorFloor: 0xffff00, //0x4b7447,\n\t//ExposedFloor: 0x40b4ff,\n\tShade: 0xff00ff, //0xc99e10,\n\t//UndergroundWall: 0xa55200,\n\t//UndergroundSlab: 0x804000,\n\t//Ceiling: 0xff8080,\n\t//Air: 0xffff00,\n\t//UndergroundCeiling: 0x408080,\n\t//RaisedFloor: 0x4b417d,\n\tSlabOnGrade: 0x555555 //0x8eba43\n\t//FreestandingColumn: 0x808080,\n\t//EmbeddedColumn: 0x80806e\n};\n\nclass App extends Component {\n\tcomponentDidMount() {\n\t\tthis.sceneSetup();\n\t\tthis.startAnimationLoop();\n\t\twindow.addEventListener(\"resize\", this.handleWindowResize);\n\t\twindow.addEventListener(\n\t\t\t\"orientationchange\",\n\t\t\tthis.handleWindowResize,\n\t\t\tfalse\n\t\t);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener(\"resize\", this.handleWindowResize);\n\t\twindow.removeEventListener(\n\t\t\t\"orientationchange\",\n\t\t\tthis.handleWindowResize,\n\t\t\tfalse\n\t\t);\n\t\twindow.cancelAnimationFrame(this.requestID);\n\t\tthis.controls.dispose();\n\t}\n\n\tsceneSetup = () => {\n\t\t// get container dimensions and use them for scene sizing\n\t\tconst width = this.el.clientWidth;\n\t\tconst height = this.el.clientHeight;\n\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.camera = new THREE.PerspectiveCamera(\n\t\t\t100, // fov = field of view\n\t\t\twidth / height, // aspect ratio\n\t\t\t1, // near plane\n\t\t\t10000 // far plane\n\t\t);\n\t\tthis.camera.up.set(0, 0, 1);\n\n\t\t// OrbitControls allow a camera to orbit around the object\n\t\t// https://threejs.org/docs/#examples/controls/OrbitControls\n\t\tthis.controls = new OrbitControls(this.camera, this.el);\n\t\tthis.renderer = new THREE.WebGLRenderer({\n\t\t\talpha: true,\n\t\t\tantialias: true\n\t\t});\n\t\tthis.renderer.setSize(width, height);\n\t\tthis.el.appendChild(this.renderer.domElement);\n\n\t\t// Create Global Ambient Light, Light Direction and Light Point\n\t\tthis.lightAmbient = new THREE.AmbientLight(0x999999);\n\t\tthis.scene.add(this.lightAmbient);\n\n\t\tthis.lightDirectional = new THREE.DirectionalLight(0xffffff, 1);\n\t\tthis.lightDirectional.position.set(1, 0, 1);\n\t\tthis.lightDirectional.shadow.mapSize.width = 2048; // default 512\n\t\tthis.lightDirectional.shadow.mapSize.height = 2048;\n\t\tthis.lightDirectional.castShadow = true;\n\t\tthis.scene.add(this.lightDirectional);\n\n\t\tthis.lightPoint = new THREE.PointLight(0xffffff, 0.5);\n\t\t// this.lightPoint.position = new THREE.Vector3(0, 0, 1);\n\t\tthis.camera.add(this.lightPoint);\n\t\tthis.scene.add(this.camera);\n\n\t\tthis.axesHelper = new THREE.AxesHelper(200);\n\t\tthis.scene.add(this.axesHelper);\n\n\t\tthis.readXMLFile();\n\t};\n\n\tstartAnimationLoop = () => {\n\t\tthis.renderer.render(this.scene, this.camera);\n\n\t\t// The window.requestAnimationFrame() method tells the browser that you wish to perform\n\t\t// an animation and requests that the browser call a specified function\n\t\t// to update an animation before the next repaint\n\t\tthis.requestID = window.requestAnimationFrame(this.startAnimationLoop);\n\t\tthis.controls.update();\n\t};\n\n\thandleWindowResize = () => {\n\t\tconst width = this.el.clientWidth;\n\t\tconst height = this.el.clientHeight;\n\n\t\tthis.renderer.setSize(width, height);\n\t\tthis.camera.aspect = width / height;\n\n\t\t// Note that after making changes to most of camera properties you have to call\n\t\t// .updateProjectionMatrix for the changes to take effect.\n\t\tthis.camera.updateProjectionMatrix();\n\t};\n\n\treadXMLFile = async () => {\n\t\tconst { data } = await http.get(\"assets/OfficeBuilding.xml\");\n\t\tconst { gbXML } = convert.xml2js(data, { compact: true, space: 4 });\n\t\tthis.addCustomSceneObjects(gbXML);\n\t};\n\n\taddCustomSceneObjects = gb => {\n\t\tconst surfaces = gb.Campus.Surface;\n\n\t\tlet polyloops = [];\n\t\tlet openings = [];\n\n\t\tfor (let surface of surfaces) {\n\t\t\tif (surface.Opening) {\n\t\t\t\tif (surface.Opening.PlanarGeometry) {\n\t\t\t\t\tconst polyloop = surface.Opening.PlanarGeometry.PolyLoop;\n\t\t\t\t\tconst points = this.getPoints(polyloop);\n\t\t\t\t\topenings.push([points]);\n\t\t\t\t} else {\n\t\t\t\t\tlet arr = [];\n\n\t\t\t\t\tfor (let opening of surface.Opening) {\n\t\t\t\t\t\tconst polyloop = opening.PlanarGeometry.PolyLoop;\n\t\t\t\t\t\tconst points = this.getPoints(polyloop);\n\t\t\t\t\t\tarr.push(points);\n\t\t\t\t\t}\n\n\t\t\t\t\topenings.push(arr);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\topenings.push([]);\n\t\t\t}\n\n\t\t\tconst polyloop = surface.PlanarGeometry.PolyLoop;\n\t\t\tconst points = this.getPoints(polyloop);\n\t\t\tpolyloops.push(points);\n\t\t}\n\n\t\tthis.scene.remove(this.campusSurfaces);\n\n\t\t// Create Object 3D\n\t\tthis.campusSurfaces = new THREE.Object3D();\n\n\t\tfor (let i = 0; i < polyloops.length; i++) {\n\t\t\tlet material = new THREE.MeshPhongMaterial({\n\t\t\t\tcolor: colors[surfaces[i]._attributes.surfaceType],\n\t\t\t\temissive: 0x000000,\n\t\t\t\tside: THREE.DoubleSide,\n\t\t\t\tflatShading: true\n\t\t\t});\n\n\t\t\tconst shape = this.drawShapeSinglePassObjects(\n\t\t\t\tpolyloops[i],\n\t\t\t\tmaterial,\n\t\t\t\topenings[i]\n\t\t\t);\n\t\t\tthis.campusSurfaces.add(shape);\n\t\t}\n\n\t\tthis.scene.add(this.campusSurfaces);\n\n\t\t// Change Camera Zoom and Position to fit Object to Screen\n\t\tthis.zoomObjectBoundingSphere(this.campusSurfaces);\n\t};\n\n\tgetPoints = polyloop => {\n\t\tlet points = [];\n\n\t\tfor (let CartesianPoint of polyloop.CartesianPoint) {\n\t\t\tconst CartesianPointCoordinateArray = CartesianPoint.Coordinate.map(\n\t\t\t\tobj => parseFloat(obj._text)\n\t\t\t);\n\t\t\tconst point = new THREE.Vector3().fromArray(\n\t\t\t\tCartesianPointCoordinateArray\n\t\t\t);\n\t\t\tpoints.push(point);\n\t\t}\n\t\treturn points;\n\t};\n\n\tdrawShapeSinglePassObjects = (vertices, material, holes) => {\n\t\t// Make a shape from vertices\n\t\t// Because shape is 2D object, we can only define shapes only in x-y plane\n\t\t// So to define a shape in e.g. x-z plane we need to do some calculations to map it in x-y plane\n\n\t\t// Because surface is planar, so make a plane from three points of surface\n\t\tconst plane = new THREE.Plane().setFromCoplanarPoints(\n\t\t\tvertices[0],\n\t\t\tvertices[1],\n\t\t\tvertices[2]\n\t\t);\n\n\t\t// make an object and rotates the object to face a point in world space. Point is normal vector of plane (surface)\n\t\t// obj is parallel to surface, so, normal of obj and plane should be the same\n\t\tconst obj = new THREE.Object3D();\n\t\tobj.lookAt(plane.normal);\n\n\t\t// make another object and rotates the object to conjugate quaternion of plane (surface)\n\t\tconst objQuaternionConjugate = new THREE.Object3D();\n\t\tobjQuaternionConjugate.quaternion.copy(\n\t\t\tobj.clone().quaternion.conjugate()\n\t\t);\n\t\tobjQuaternionConjugate.updateMatrixWorld(true);\n\n\t\t// Converts the vector from local space to world space.\n\t\t// Rotate each point of surface\n\t\t// f(p) = q.p.q^-1\n\t\t// https://eater.net/quaternions/video/intro\n\t\tfor (let vertex of vertices) {\n\t\t\tobjQuaternionConjugate.localToWorld(vertex);\n\t\t}\n\t\t// Now vertices are in x-y plane and we can use shape to draw it\n\n\t\tconst shape = new THREE.Shape(vertices);\n\t\tshape.autoClose = true;\n\n\t\tfor (let verticesHoles of holes) {\n\t\t\tfor (let vertex of verticesHoles) {\n\t\t\t\tobjQuaternionConjugate.localToWorld(vertex);\n\t\t\t}\n\n\t\t\tconst hole = new THREE.Path();\n\t\t\thole.setFromPoints(verticesHoles);\n\t\t\tshape.holes.push(hole);\n\t\t}\n\n\t\tconst geometryShape = new THREE.ShapeGeometry(shape);\n\n\t\tlet shapeMesh = new THREE.Mesh(geometryShape, material);\n\t\t// back to original direction\n\t\tshapeMesh.quaternion.copy(obj.quaternion);\n\t\t// if don't do that all surfaces are on each other\n\t\tshapeMesh.position.copy(plane.normal.multiplyScalar(-plane.constant));\n\n\t\treturn shapeMesh;\n\t};\n\n\tzoomObjectBoundingSphere = obj => {\n\t\t// Define boundingBox\n\t\tconst boundingBox = new THREE.Box3().setFromObject(obj);\n\t\tconst sphere = new THREE.Sphere();\n\t\tboundingBox.getBoundingSphere(sphere);\n\t\tconst center = sphere.center;\n\t\tconst radius = sphere.radius;\n\n\t\t// Modify controls if want to control rotation on the object not on axes\n\t\tthis.controls.target.copy(center);\n\t\tthis.controls.maxDistance = 5 * radius;\n\n\t\t// Modify camera to look at object\n\t\tthis.camera.position.copy(\n\t\t\tcenter\n\t\t\t\t.clone()\n\t\t\t\t.add(\n\t\t\t\t\tnew THREE.Vector3(1.0 * radius, -1.0 * radius, 1.0 * radius)\n\t\t\t\t)\n\t\t);\n\t\tthis.camera.far = 10 * radius;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t\t// Modify axesHelper if want to position origin of axesHelper in center of the object\n\t\t//this.axesHelper.position.copy(center);\n\n\t\t// Modify lightDirectional position\n\t\t// this.lightDirectional.position.copy(\n\t\t// \tcenter\n\t\t// \t\t.clone()\n\t\t// \t\t.add(\n\t\t// \t\t\tnew THREE.Vector3(1.5 * radius, 1.5 * radius, 1.5 * radius)\n\t\t// \t\t)\n\t\t// );\n\n\t\t// this.lightDirectional.shadow.camera.scale.set(\n\t\t// \t0.2 * radius,\n\t\t// \t0.2 * radius,\n\t\t// \t0.01 * radius\n\t\t// );\n\n\t\t// this.lightDirectional.target = this.axesHelper;\n\t};\n\n\trender() {\n\t\treturn <div style={style} ref={ref => (this.el = ref)} />;\n\t}\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}